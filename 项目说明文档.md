# é²²æ“æ ¡å›­ - å‰åç«¯è¯¦ç»†è¯´æ˜æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é²²æ“æ ¡å›­**æ˜¯ä¸€ä¸ªåŸºäºFlaskæ¡†æ¶å¼€å‘çš„æ ¡å›­ç»¼åˆæœåŠ¡å¹³å°ï¼Œæ—¨åœ¨ä¸ºé«˜æ ¡å¸ˆç”Ÿæä¾›ä¾¿æ·çš„æ ¡å›­ç”Ÿæ´»æœåŠ¡ã€‚è¯¥é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„è®¾è®¡ï¼Œæä¾›ç”¨æˆ·è®¤è¯ã€å¤±ç‰©æ‹›é¢†ã€äºŒæ‰‹ä¹¦äº¤æ˜“ã€è¯¾ç¨‹è¯„ä»·ã€å­¦ä¹ å°ç»„ç­‰æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚

### ğŸš€ å½“å‰çŠ¶æ€è¯´æ˜

**æœ¬é¡¹ç›®ç›®å‰å¤„äºæœ¬åœ°å¼€å‘æµ‹è¯•é˜¶æ®µ**ï¼Œå·²å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘å’Œç®¡ç†åå°ç¾åŒ–ã€‚é¡¹ç›®æ”¯æŒæœ¬åœ°SQLiteæ•°æ®åº“è¿è¡Œï¼ŒåŒæ—¶é¢„ç•™äº†MySQLæ•°æ®åº“æ¥å£ï¼Œä¾¿äºåç»­ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

#### å¼€å‘ç¯å¢ƒç‰¹ç‚¹
- âœ… æœ¬åœ°SQLiteæ•°æ®åº“ï¼Œæ— éœ€é¢å¤–é…ç½®
- âœ… å®Œæ•´çš„ç®¡ç†åå°ç•Œé¢ï¼Œæ”¯æŒç”¨æˆ·ç®¡ç†å’Œå†…å®¹ç®¡ç†
- âœ… å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®
- âœ… ç¤ºä¾‹æ•°æ®é¢„ç½®ï¼Œä¾¿äºåŠŸèƒ½æµ‹è¯•å’Œæ¼”ç¤º
- âœ… ç°ä»£åŒ–UIè®¾è®¡ï¼ŒåŒ…å«åŠ¨ç”»æ•ˆæœå’Œäº¤äº’ä¼˜åŒ–

#### ç”Ÿäº§ç¯å¢ƒè§„åˆ’
- ğŸ”„ MySQLæ•°æ®åº“é›†æˆï¼ˆè„šæœ¬å·²å‡†å¤‡ï¼‰
- ğŸ”„ æœåŠ¡å™¨éƒ¨ç½²é…ç½®ï¼ˆNginx + Gunicornï¼‰
- ğŸ”„ åŸŸåå’ŒSSLè¯ä¹¦é…ç½®
- ğŸ”„ ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®
- ğŸ”„ æ•°æ®å¤‡ä»½å’Œæ¢å¤æœºåˆ¶

### ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- **æ¨¡å—åŒ–è®¾è®¡**ï¼šé‡‡ç”¨Blueprintè“å›¾æ¨¡å¼ï¼Œå„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹å¼€å‘å’Œç»´æŠ¤
- **å“åº”å¼ç•Œé¢**ï¼šåŸºäºç°ä»£CSSè®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡é€‚é…
- **æ•°æ®æŒä¹…åŒ–**ï¼šæ”¯æŒSQLiteå’ŒMySQLåŒæ•°æ®åº“æ–¹æ¡ˆ
- **ç”¨æˆ·å‹å¥½**ï¼šç®€æ´ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
- **å®‰å…¨å¯é **ï¼šå®Œå–„çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†æœºåˆ¶

### ğŸ—ï¸ æŠ€æœ¯æ ˆ

#### åç«¯æŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**: Flask 2.3.3
- **æ•°æ®åº“ORM**: Flask-SQLAlchemy 3.0.5
- **ç”¨æˆ·è®¤è¯**: Flask-Login 0.6.3
- **è¡¨å•å¤„ç†**: Flask-WTF 1.1.1, WTForms 3.0.1
- **å¯†ç åŠ å¯†**: bcrypt 4.0.1
- **é‚®ç®±éªŒè¯**: email-validator 2.0.0
- **å›¾åƒå¤„ç†**: Pillow 10.0.0
- **æ•°æ®åº“**: SQLite (å¼€å‘ç¯å¢ƒ) / MySQL (ç”Ÿäº§ç¯å¢ƒ)

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¨¡æ¿å¼•æ“**: Jinja2 (Flaskå†…ç½®)
- **æ ·å¼æ¡†æ¶**: è‡ªå®šä¹‰CSS + å“åº”å¼è®¾è®¡
- **JavaScript**: åŸç”ŸJavaScript
- **å›¾æ ‡**: ä½¿ç”¨Emojiå›¾æ ‡ç³»ç»Ÿ

#### å¼€å‘å·¥å…·
- **ç‰ˆæœ¬æ§åˆ¶**: Git
- **ä»£ç æ‰˜ç®¡**: Gitee
- **å¼€å‘ç¯å¢ƒ**: Python 3.12+
- **IDE**: æ”¯æŒå¤šç§IDE (PyCharm, VSCodeç­‰)

## ğŸ›ï¸ é¡¹ç›®æ¶æ„

### ğŸ“ ç›®å½•ç»“æ„

```
kunqing-campus/
â”œâ”€â”€ app/                          # åº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ __init__.py              # åº”ç”¨å·¥å‚å‡½æ•°
â”‚   â”œâ”€â”€ models.py                # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ simple_models.py         # ç®€åŒ–æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ forms/                   # è¡¨å•å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ auth.py             # è®¤è¯ç›¸å…³è¡¨å•
â”‚   â”œâ”€â”€ routes/                  # è·¯ç”±è“å›¾
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py             # ç”¨æˆ·è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ lost_found.py       # å¤±ç‰©æ‹›é¢†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ books.py            # äºŒæ‰‹ä¹¦äº¤æ˜“è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ courses.py          # è¯¾ç¨‹è¯„ä»·è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ study_groups.py     # å­¦ä¹ å°ç»„è·¯ç”±
â”‚   â”‚   â””â”€â”€ simple_*.py         # ç®€åŒ–ç‰ˆè·¯ç”±
â”‚   â”œâ”€â”€ templates/               # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ base.html           # åŸºç¡€æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ auth/               # è®¤è¯æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ lost_found/         # å¤±ç‰©æ‹›é¢†æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ books/              # å›¾ä¹¦äº¤æ˜“æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ courses/            # è¯¾ç¨‹è¯„ä»·æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ study_groups/       # å­¦ä¹ å°ç»„æ¨¡æ¿
â”‚   â”œâ”€â”€ static/                  # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ js/                 # JavaScriptæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ images/             # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ decorators.py       # è£…é¥°å™¨
â”‚       â””â”€â”€ helpers.py          # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ mysql/                       # MySQLæ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ create_*.sql            # å»ºè¡¨è„šæœ¬
â”‚   â”œâ”€â”€ sample_data.sql         # ç¤ºä¾‹æ•°æ®
â”‚   â””â”€â”€ README.md               # æ•°æ®åº“è¯´æ˜
â”œâ”€â”€ config.py                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt             # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ run.py                      # åº”ç”¨å¯åŠ¨æ–‡ä»¶
â”œâ”€â”€ kunqing.sqlite              # SQLiteæ•°æ®åº“æ–‡ä»¶
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

### ğŸ”§ æ ¸å¿ƒæ¶æ„è®¾è®¡

#### 1. åº”ç”¨å·¥å‚æ¨¡å¼
é¡¹ç›®é‡‡ç”¨Flaskåº”ç”¨å·¥å‚æ¨¡å¼ï¼Œé€šè¿‡`create_app()`å‡½æ•°åˆ›å»ºåº”ç”¨å®ä¾‹ï¼Œä¾¿äºæµ‹è¯•å’Œéƒ¨ç½²ï¼š

```python
def create_app():
    app = Flask(__name__)
    app.config.from_object(Config)
    
    # åˆå§‹åŒ–æ‰©å±•
    login_manager = LoginManager()
    login_manager.init_app(app)
    
    # æ³¨å†Œè“å›¾
    from .routes import auth_bp, lost_found_bp, books_bp, courses_bp, study_groups_bp
    app.register_blueprint(auth_bp)
    # ... å…¶ä»–è“å›¾æ³¨å†Œ
    
    return app
```

#### 2. è“å›¾æ¨¡å—åŒ–
ä½¿ç”¨Flask Blueprintå®ç°åŠŸèƒ½æ¨¡å—åŒ–ï¼Œæ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ç®¡ç†ï¼š

- **auth_bp**: ç”¨æˆ·è®¤è¯æ¨¡å— (`/auth/`)
- **lost_found_bp**: å¤±ç‰©æ‹›é¢†æ¨¡å— (`/lost-found/`)
- **books_bp**: äºŒæ‰‹ä¹¦äº¤æ˜“æ¨¡å— (`/books/`)
- **courses_bp**: è¯¾ç¨‹è¯„ä»·æ¨¡å— (`/courses/`)
- **study_groups_bp**: å­¦ä¹ å°ç»„æ¨¡å— (`/study-groups/`)

#### 3. æ•°æ®å±‚è®¾è®¡
é¡¹ç›®æ”¯æŒä¸¤å¥—æ•°æ®æ¨¡å‹ï¼š

- **å®Œæ•´æ¨¡å‹** (`models.py`): åŸºäºSQLAlchemy ORMçš„å®Œæ•´æ•°æ®æ¨¡å‹
- **ç®€åŒ–æ¨¡å‹** (`simple_models.py`): åŸºäºSQLiteçš„è½»é‡çº§æ•°æ®æ¨¡å‹

## ğŸ¨ å‰ç«¯æ¶æ„

### æ¨¡æ¿ç³»ç»Ÿ

#### åŸºç¡€æ¨¡æ¿ (base.html)
é‡‡ç”¨Jinja2æ¨¡æ¿ç»§æ‰¿æœºåˆ¶ï¼Œå®šä¹‰äº†ç»Ÿä¸€çš„é¡µé¢ç»“æ„ï¼š

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}é²²æ“æ ¡å›­{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <!-- å¯¼èˆªå†…å®¹ -->
    </nav>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="container">
        {% block content %}{% endblock %}
    </main>
    
    <!-- é¡µè„š -->
    <footer>
        <!-- é¡µè„šå†…å®¹ -->
    </footer>
</body>
</html>
```

#### å“åº”å¼è®¾è®¡
CSSé‡‡ç”¨ç°ä»£å“åº”å¼è®¾è®¡åŸåˆ™ï¼š

```css
/* ç§»åŠ¨è®¾å¤‡é€‚é… */
@media (max-width: 768px) {
    .container {
        padding: 15px;
    }
    
    .nav-menu {
        grid-template-columns: 1fr;
    }
}

/* å°å±å¹•è®¾å¤‡é€‚é… */
@media (max-width: 480px) {
    .main-content {
        padding: 20px;
    }
}
```

### é™æ€èµ„æºç®¡ç†

#### CSSæ ·å¼ç³»ç»Ÿ
- **style.css**: ä¸»æ ·å¼æ–‡ä»¶ï¼ŒåŒ…å«å…¨å±€æ ·å¼å’Œç»„ä»¶æ ·å¼
- **å“åº”å¼å¸ƒå±€**: æ”¯æŒæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºå¤šç«¯é€‚é…
- **ç°ä»£è®¾è®¡**: é‡‡ç”¨æ¸å˜èƒŒæ™¯ã€é˜´å½±æ•ˆæœã€åŠ¨ç”»è¿‡æ¸¡

#### JavaScriptåŠŸèƒ½
- **è¡¨å•éªŒè¯**: å®¢æˆ·ç«¯è¡¨å•éªŒè¯
- **äº¤äº’æ•ˆæœ**: é¡µé¢äº¤äº’å’ŒåŠ¨æ€æ•ˆæœ
- **AJAXè¯·æ±‚**: å¼‚æ­¥æ•°æ®äº¤äº’

## âš™ï¸ åç«¯æ¶æ„

### æ•°æ®æ¨¡å‹è®¾è®¡

#### ç”¨æˆ·æ¨¡å‹ (User)
```python
class User(db.Model):
    __tablename__ = "users"
    
    id = db.Column(db.Integer, primary_key=True)
    student_id = db.Column(db.String(20), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password_hash = db.Column(db.String(128), nullable=False)
    real_name = db.Column(db.String(50))
    college = db.Column(db.String(100))
    major = db.Column(db.String(100))
    grade = db.Column(db.String(20))
    phone = db.Column(db.String(20))
    avatar = db.Column(db.String(255))
    create_time = db.Column(db.DateTime, default=db.func.now())
    last_login = db.Column(db.DateTime)
```

#### å…³ç³»æ˜ å°„
ç”¨æˆ·æ¨¡å‹ä¸å…¶ä»–æ¨¡å‹å»ºç«‹äº†å®Œæ•´çš„å…³ç³»æ˜ å°„ï¼š

- **ä¸€å¯¹å¤šå…³ç³»**: ç”¨æˆ· â†’ å¤±ç‰©æ‹›é¢†ã€äºŒæ‰‹ä¹¦ã€è¯¾ç¨‹è¯„ä»·ã€å­¦ä¹ å°ç»„
- **å¤šå¯¹å¤šå…³ç³»**: ç”¨æˆ· â†” å­¦ä¹ å°ç»„æˆå‘˜å…³ç³»

### è·¯ç”±ç³»ç»Ÿ

#### è®¤è¯è·¯ç”± (auth.py)
```python
@auth_bp.route("/login", methods=["GET", "POST"])
def login():
    # ç”¨æˆ·ç™»å½•é€»è¾‘
    pass

@auth_bp.route("/register", methods=["GET", "POST"])
def register():
    # ç”¨æˆ·æ³¨å†Œé€»è¾‘
    pass

@auth_bp.route("/logout")
@login_required
def logout():
    # ç”¨æˆ·ç™»å‡ºé€»è¾‘
    pass
```

#### ä¸šåŠ¡è·¯ç”±
æ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æœ‰å¯¹åº”çš„è·¯ç”±å¤„ç†ï¼š

- **CRUDæ“ä½œ**: åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤
- **æƒé™æ§åˆ¶**: åŸºäº`@login_required`è£…é¥°å™¨
- **æ•°æ®éªŒè¯**: è¡¨å•éªŒè¯å’Œæ•°æ®æ ¡éªŒ
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

### å®‰å…¨æœºåˆ¶

#### ç”¨æˆ·è®¤è¯
- **å¯†ç åŠ å¯†**: ä½¿ç”¨bcryptè¿›è¡Œå¯†ç å“ˆå¸Œ
- **ä¼šè¯ç®¡ç†**: Flask-Loginç®¡ç†ç”¨æˆ·ä¼šè¯
- **æƒé™æ§åˆ¶**: è£…é¥°å™¨å®ç°è®¿é—®æ§åˆ¶

#### æ•°æ®å®‰å…¨
- **SQLæ³¨å…¥é˜²æŠ¤**: SQLAlchemy ORMè‡ªåŠ¨é˜²æŠ¤
- **CSRFä¿æŠ¤**: Flask-WTFæä¾›CSRFä»¤ç‰Œ
- **æ–‡ä»¶ä¸Šä¼ å®‰å…¨**: æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶

## ğŸ”Œ åŠŸèƒ½æ¨¡å—è¯¦è§£

### 1. ç”¨æˆ·è®¤è¯æ¨¡å—

#### åŠŸèƒ½ç‰¹æ€§
- **ç”¨æˆ·æ³¨å†Œ**: å­¦å·ã€é‚®ç®±æ³¨å†Œï¼Œå¯†ç å¼ºåº¦éªŒè¯
- **ç”¨æˆ·ç™»å½•**: æ”¯æŒå­¦å·æˆ–é‚®ç®±ç™»å½•
- **ä¸ªäººèµ„æ–™**: å®Œå–„ä¸ªäººä¿¡æ¯ç®¡ç†
- **å¯†ç é‡ç½®**: é‚®ç®±éªŒè¯é‡ç½®å¯†ç 

#### APIæ¥å£
```
POST /auth/register     # ç”¨æˆ·æ³¨å†Œ
POST /auth/login        # ç”¨æˆ·ç™»å½•
GET  /auth/logout       # ç”¨æˆ·ç™»å‡º
GET  /auth/profile      # ä¸ªäººèµ„æ–™é¡µé¢
POST /auth/profile      # æ›´æ–°ä¸ªäººèµ„æ–™
```

### 2. å¤±ç‰©æ‹›é¢†æ¨¡å—

#### åŠŸèƒ½ç‰¹æ€§
- **ç‰©å“å‘å¸ƒ**: å‘å¸ƒä¸¢å¤±æˆ–æ‹¾åˆ°çš„ç‰©å“ä¿¡æ¯
- **åˆ†ç±»ç®¡ç†**: æŒ‰ç‰©å“ç±»å‹åˆ†ç±»æ˜¾ç¤º
- **æœç´¢åŠŸèƒ½**: å…³é”®è¯æœç´¢ç‰©å“ä¿¡æ¯
- **è”ç³»æ–¹å¼**: æä¾›è”ç³»æ–¹å¼ä¾¿äºæ²Ÿé€š

#### æ•°æ®æ¨¡å‹
```python
class LostFound(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('users.id'))
    type = db.Column(db.String(20))  # 'lost' or 'found'
    title = db.Column(db.String(200))
    description = db.Column(db.Text)
    location = db.Column(db.String(200))
    contact = db.Column(db.String(100))
    status = db.Column(db.String(20), default='active')
    create_time = db.Column(db.DateTime, default=db.func.now())
```

### 3. äºŒæ‰‹ä¹¦äº¤æ˜“æ¨¡å—

#### åŠŸèƒ½ç‰¹æ€§
- **å›¾ä¹¦å‘å¸ƒ**: å‘å¸ƒäºŒæ‰‹ä¹¦é”€å”®ä¿¡æ¯
- **å›¾ä¹¦æœç´¢**: æŒ‰ä¹¦åã€ä½œè€…ã€ä»·æ ¼æœç´¢
- **æˆè‰²æè¿°**: è¯¦ç»†çš„å›¾ä¹¦æˆè‰²è¯´æ˜
- **ä»·æ ¼ç®¡ç†**: çµæ´»çš„ä»·æ ¼è®¾ç½®

#### ä¸šåŠ¡æµç¨‹
1. ç”¨æˆ·å‘å¸ƒäºŒæ‰‹ä¹¦ä¿¡æ¯
2. å…¶ä»–ç”¨æˆ·æµè§ˆå’Œæœç´¢å›¾ä¹¦
3. é€šè¿‡è”ç³»æ–¹å¼è¿›è¡Œäº¤æ˜“æ²Ÿé€š
4. äº¤æ˜“å®Œæˆåæ›´æ–°çŠ¶æ€

### 4. è¯¾ç¨‹è¯„ä»·æ¨¡å—

#### åŠŸèƒ½ç‰¹æ€§
- **è¯¾ç¨‹ä¿¡æ¯**: è¯¾ç¨‹åç§°ã€ä»£ç ã€æ•™å¸ˆä¿¡æ¯
- **è¯„ä»·ç³»ç»Ÿ**: å¤šç»´åº¦è¯¾ç¨‹è¯„ä»·
- **è¯„åˆ†ç»Ÿè®¡**: è¯¾ç¨‹å¹³å‡è¯„åˆ†è®¡ç®—
- **è¯„ä»·å±•ç¤º**: è¯„ä»·å†…å®¹å…¬å¼€å±•ç¤º

#### è¯„ä»·ç»´åº¦
- è¯¾ç¨‹å†…å®¹è´¨é‡
- æ•™å¸ˆæ•™å­¦æ°´å¹³
- è¯¾ç¨‹éš¾åº¦è¯„ä¼°
- æ¨èç¨‹åº¦

### 5. å­¦ä¹ å°ç»„æ¨¡å—

#### åŠŸèƒ½ç‰¹æ€§
- **å°ç»„åˆ›å»º**: åˆ›å»ºå­¦ä¹ å°ç»„
- **æˆå‘˜ç®¡ç†**: å°ç»„æˆå‘˜åŠ å…¥å’Œé€€å‡º
- **æ´»åŠ¨å‘å¸ƒ**: å‘å¸ƒå°ç»„å­¦ä¹ æ´»åŠ¨
- **è®¨è®ºäº¤æµ**: å°ç»„å†…éƒ¨äº¤æµè®¨è®º

#### ç»„ç»‡ç»“æ„
- **å°ç»„é•¿**: å°ç»„åˆ›å»ºè€…ï¼Œæ‹¥æœ‰ç®¡ç†æƒé™
- **æˆå‘˜**: æ™®é€šå°ç»„æˆå‘˜
- **æ´»åŠ¨**: å°ç»„å­¦ä¹ æ´»åŠ¨å®‰æ’

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### SQLiteæ–¹æ¡ˆ (å¼€å‘ç¯å¢ƒ)
- **è½»é‡çº§**: æ— éœ€é¢å¤–å®‰è£…æ•°æ®åº“æœåŠ¡
- **ä¾¿æºæ€§**: æ•°æ®åº“æ–‡ä»¶å¯éšé¡¹ç›®ç§»åŠ¨
- **å¿«é€Ÿå¼€å‘**: é€‚åˆå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ

### MySQLæ–¹æ¡ˆ (ç”Ÿäº§ç¯å¢ƒ)
- **é«˜æ€§èƒ½**: æ”¯æŒå¤§å¹¶å‘è®¿é—®
- **å¯æ‰©å±•**: æ”¯æŒé›†ç¾¤å’Œåˆ†å¸ƒå¼éƒ¨ç½²
- **å®Œæ•´åŠŸèƒ½**: å®Œæ•´çš„SQLåŠŸèƒ½æ”¯æŒ

### æ•°æ®è¡¨ç»“æ„

#### æ ¸å¿ƒè¡¨è®¾è®¡
1. **users**: ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨
2. **lost_found**: å¤±ç‰©æ‹›é¢†ä¿¡æ¯è¡¨
3. **secondhand_books**: äºŒæ‰‹ä¹¦ä¿¡æ¯è¡¨
4. **courses**: è¯¾ç¨‹ä¿¡æ¯è¡¨
5. **course_reviews**: è¯¾ç¨‹è¯„ä»·è¡¨
6. **study_groups**: å­¦ä¹ å°ç»„è¡¨
7. **group_members**: å°ç»„æˆå‘˜å…³ç³»è¡¨

#### ç´¢å¼•ä¼˜åŒ–
- ä¸»é”®ç´¢å¼•: æ‰€æœ‰è¡¨çš„idå­—æ®µ
- å”¯ä¸€ç´¢å¼•: ç”¨æˆ·å­¦å·ã€é‚®ç®±
- å¤–é”®ç´¢å¼•: å…³è”è¡¨çš„å¤–é”®å­—æ®µ
- æŸ¥è¯¢ç´¢å¼•: å¸¸ç”¨æŸ¥è¯¢å­—æ®µ

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒæ­å»º

#### 1. ç¯å¢ƒè¦æ±‚
- Python 3.8+
- pipåŒ…ç®¡ç†å™¨
- Gitç‰ˆæœ¬æ§åˆ¶

#### 2. é¡¹ç›®å…‹éš†
```bash
git clone https://gitee.com/ospuer/kunqing.git
cd kunqing-campus
```

#### 3. è™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Windows)
.venv\Scripts\activate

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Linux/Mac)
source .venv/bin/activate
```

#### 4. ä¾èµ–å®‰è£…
```bash
pip install -r requirements.txt
```

#### 5. æ•°æ®åº“åˆå§‹åŒ–
```bash
# SQLiteæ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»º
# å¦‚éœ€ä½¿ç”¨MySQLï¼Œè¯·å‚è€ƒmysql/ç›®å½•ä¸‹çš„SQLè„šæœ¬
```

#### 6. å¯åŠ¨åº”ç”¨
```bash
python run.py
```

è®¿é—® `http://127.0.0.1:5000` å³å¯ä½¿ç”¨åº”ç”¨ã€‚

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. æœåŠ¡å™¨é…ç½®
- **æ“ä½œç³»ç»Ÿ**: Linux (æ¨èUbuntu/CentOS)
- **WebæœåŠ¡å™¨**: Nginx
- **WSGIæœåŠ¡å™¨**: Gunicorn
- **æ•°æ®åº“**: MySQL 5.7+

#### 2. ç¯å¢ƒå˜é‡é…ç½®
```bash
export SECRET_KEY="your-production-secret-key"
export DATABASE_URL="mysql://user:password@localhost/kunqing"
export MAIL_SERVER="smtp.example.com"
export MAIL_USERNAME="your-email@example.com"
export MAIL_PASSWORD="your-email-password"
```

#### 3. Gunicorné…ç½®
```bash
gunicorn -w 4 -b 0.0.0.0:8000 run:app
```

#### 4. Nginxé…ç½®
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    location /static {
        alias /path/to/kunqing-campus/app/static;
    }
}
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### ç®¡ç†å‘˜æ“ä½œ

#### 1. ç”¨æˆ·ç®¡ç†
- æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
- ç”¨æˆ·çŠ¶æ€ç®¡ç†
- æƒé™åˆ†é…

#### 2. å†…å®¹ç®¡ç†
- å®¡æ ¸å‘å¸ƒå†…å®¹
- åˆ é™¤è¿è§„ä¿¡æ¯
- æ•°æ®ç»Ÿè®¡åˆ†æ

### æ™®é€šç”¨æˆ·æ“ä½œ

#### 1. æ³¨å†Œç™»å½•
1. è®¿é—®æ³¨å†Œé¡µé¢
2. å¡«å†™å­¦å·ã€é‚®ç®±ã€å¯†ç 
3. éªŒè¯é‚®ç®±ï¼ˆå¦‚å¯ç”¨ï¼‰
4. å®Œå–„ä¸ªäººèµ„æ–™

#### 2. åŠŸèƒ½ä½¿ç”¨
1. **å¤±ç‰©æ‹›é¢†**: å‘å¸ƒä¸¢å¤±æˆ–æ‹¾åˆ°ç‰©å“ä¿¡æ¯
2. **äºŒæ‰‹ä¹¦äº¤æ˜“**: å‘å¸ƒæˆ–è´­ä¹°äºŒæ‰‹ä¹¦ç±
3. **è¯¾ç¨‹è¯„ä»·**: å¯¹å·²ä¿®è¯¾ç¨‹è¿›è¡Œè¯„ä»·
4. **å­¦ä¹ å°ç»„**: åˆ›å»ºæˆ–åŠ å…¥å­¦ä¹ å°ç»„

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º

#### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å…‹éš†é¡¹ç›®
git clone https://gitee.com/ospuer/kunqing.git
cd kunqing-campus

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Windows)
.venv\Scripts\activate
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Linux/Mac)
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### 2. æœ¬åœ°è¿è¡Œ
```bash
# ç›´æ¥è¿è¡Œ
python run.py

# æˆ–ä½¿ç”¨Flaskå‘½ä»¤
flask run
```

è®¿é—®åœ°å€ï¼šhttp://127.0.0.1:5000

#### 3. ç®¡ç†åå°è®¿é—®
- **ç®¡ç†å‘˜ç™»å½•é¡µé¢**: http://127.0.0.1:5000/admin/login
- **é»˜è®¤ç®¡ç†å‘˜è´¦å·**: admin / admin123
- **ç”¨æˆ·ç®¡ç†**: http://127.0.0.1:5000/admin/user_management
- **å†…å®¹ç®¡ç†**: http://127.0.0.1:5000/admin/content_management

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. æœåŠ¡å™¨ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 7+
- **Pythonç‰ˆæœ¬**: 3.8+
- **æ•°æ®åº“**: MySQL 8.0+ / PostgreSQL 12+
- **WebæœåŠ¡å™¨**: Nginx 1.18+
- **WSGIæœåŠ¡å™¨**: Gunicorn 20.0+

#### 2. MySQLæ•°æ®åº“é…ç½®

##### å®‰è£…MySQL
```bash
# Ubuntu
sudo apt update
sudo apt install mysql-server

# CentOS
sudo yum install mysql-server
```

##### åˆ›å»ºæ•°æ®åº“
```sql
-- ç™»å½•MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE kunqing_campus CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºç”¨æˆ·
CREATE USER 'kunqing_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON kunqing_campus.* TO 'kunqing_user'@'localhost';
FLUSH PRIVILEGES;
```

##### å¯¼å…¥æ•°æ®è¡¨
```bash
# ä½¿ç”¨é¡¹ç›®æä¾›çš„SQLè„šæœ¬
mysql -u kunqing_user -p kunqing_campus < mysql/create_database_simple.sql
mysql -u kunqing_user -p kunqing_campus < mysql/sample_data.sql
```

#### 3. åº”ç”¨é…ç½®

##### ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
åˆ›å»º `config_production.py`:
```python
import os

class ProductionConfig:
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'your-secret-key-here'
    SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or \
        'mysql+pymysql://kunqing_user:your_password@localhost/kunqing_campus'
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    
    # é‚®ä»¶é…ç½®
    MAIL_SERVER = 'smtp.gmail.com'
    MAIL_PORT = 587
    MAIL_USE_TLS = True
    MAIL_USERNAME = os.environ.get('MAIL_USERNAME')
    MAIL_PASSWORD = os.environ.get('MAIL_PASSWORD')
    
    # æ–‡ä»¶ä¸Šä¼ é…ç½®
    UPLOAD_FOLDER = '/var/www/kunqing-campus/uploads'
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024  # 16MB
```

#### 4. Gunicorné…ç½®

##### å®‰è£…Gunicorn
```bash
pip install gunicorn
```

##### åˆ›å»ºGunicorné…ç½®æ–‡ä»¶ `gunicorn.conf.py`:
```python
bind = "127.0.0.1:8000"
workers = 4
worker_class = "sync"
worker_connections = 1000
timeout = 30
keepalive = 2
max_requests = 1000
max_requests_jitter = 100
preload_app = True
```

##### å¯åŠ¨Gunicorn
```bash
gunicorn -c gunicorn.conf.py run:app
```

#### 5. Nginxé…ç½®

##### å®‰è£…Nginx
```bash
# Ubuntu
sudo apt install nginx

# CentOS
sudo yum install nginx
```

##### åˆ›å»ºNginxé…ç½®æ–‡ä»¶ `/etc/nginx/sites-available/kunqing-campus`:
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    location /static {
        alias /var/www/kunqing-campus/app/static;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    location /uploads {
        alias /var/www/kunqing-campus/uploads;
        expires 1y;
        add_header Cache-Control "public";
    }
}
```

##### å¯ç”¨é…ç½®
```bash
sudo ln -s /etc/nginx/sites-available/kunqing-campus /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

#### 6. SSLè¯ä¹¦é…ç½® (å¯é€‰)

##### ä½¿ç”¨Let's Encrypt
```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œ
0 12 * * * /usr/bin/certbot renew --quiet
```

#### 7. ç³»ç»ŸæœåŠ¡é…ç½®

##### åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/kunqing-campus.service`:
```ini
[Unit]
Description=Kunqing Campus Flask App
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/var/www/kunqing-campus
Environment="PATH=/var/www/kunqing-campus/.venv/bin"
ExecStart=/var/www/kunqing-campus/.venv/bin/gunicorn -c gunicorn.conf.py run:app
Restart=always

[Install]
WantedBy=multi-user.target
```

##### å¯åŠ¨æœåŠ¡
```bash
sudo systemctl daemon-reload
sudo systemctl enable kunqing-campus
sudo systemctl start kunqing-campus
sudo systemctl status kunqing-campus
```

### æ•°æ®åº“è¿ç§»æŒ‡å—

#### ä»SQLiteè¿ç§»åˆ°MySQL

##### 1. å¯¼å‡ºSQLiteæ•°æ®
```bash
# ä½¿ç”¨sqlite3å‘½ä»¤å¯¼å‡ºæ•°æ®
sqlite3 kunqing.sqlite .dump > sqlite_dump.sql
```

##### 2. è½¬æ¢æ•°æ®æ ¼å¼
```python
# åˆ›å»ºè½¬æ¢è„šæœ¬ convert_sqlite_to_mysql.py
import re

def convert_sqlite_to_mysql(input_file, output_file):
    with open(input_file, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # æ›¿æ¢SQLiteç‰¹æœ‰è¯­æ³•
    content = re.sub(r'BEGIN TRANSACTION;', 'START TRANSACTION;', content)
    content = re.sub(r'COMMIT;', 'COMMIT;', content)
    content = re.sub(r'INTEGER PRIMARY KEY AUTOINCREMENT', 'INT AUTO_INCREMENT PRIMARY KEY', content)
    
    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(content)

convert_sqlite_to_mysql('sqlite_dump.sql', 'mysql_import.sql')
```

##### 3. å¯¼å…¥MySQL
```bash
mysql -u kunqing_user -p kunqing_campus < mysql_import.sql
```

### ç›‘æ§å’Œç»´æŠ¤

#### 1. æ—¥å¿—é…ç½®
```python
# åœ¨config.pyä¸­æ·»åŠ æ—¥å¿—é…ç½®
import logging
from logging.handlers import RotatingFileHandler

if not app.debug:
    if not os.path.exists('logs'):
        os.mkdir('logs')
    file_handler = RotatingFileHandler('logs/kunqing.log', maxBytes=10240, backupCount=10)
    file_handler.setFormatter(logging.Formatter(
        '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'))
    file_handler.setLevel(logging.INFO)
    app.logger.addHandler(file_handler)
    app.logger.setLevel(logging.INFO)
```

#### 2. æ€§èƒ½ç›‘æ§
```bash
# å®‰è£…ç›‘æ§å·¥å…·
pip install flask-monitoring-dashboard

# åœ¨åº”ç”¨ä¸­å¯ç”¨
import flask_monitoring_dashboard as dashboard
dashboard.bind(app)
```

#### 3. æ•°æ®å¤‡ä»½
```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬ backup.sh
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
mysqldump -u kunqing_user -p kunqing_campus > /backup/kunqing_campus_$DATE.sql
find /backup -name "kunqing_campus_*.sql" -mtime +7 -delete
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

#### Pythonä»£ç è§„èŒƒ
- éµå¾ªPEP 8ç¼–ç è§„èŒƒ
- ä½¿ç”¨ç±»å‹æç¤º (Type Hints)
- ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸² (Docstrings)
- å•å…ƒæµ‹è¯•è¦†ç›–

#### å‰ç«¯ä»£ç è§„èŒƒ
- HTMLè¯­ä¹‰åŒ–æ ‡ç­¾
- CSSæ¨¡å—åŒ–ç»„ç»‡
- JavaScript ES6+è¯­æ³•
- å“åº”å¼è®¾è®¡åŸåˆ™

### æ‰©å±•å¼€å‘

#### æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—
1. åˆ›å»ºæ–°çš„Blueprint
2. å®šä¹‰æ•°æ®æ¨¡å‹
3. ç¼–å†™è·¯ç”±å¤„ç†å‡½æ•°
4. åˆ›å»ºæ¨¡æ¿æ–‡ä»¶
5. æ·»åŠ æ ·å¼å’Œè„šæœ¬
6. æ³¨å†Œåˆ°åº”ç”¨ä¸­

#### æ•°æ®åº“è¿ç§»
```python
# ä½¿ç”¨Flask-Migrateè¿›è¡Œæ•°æ®åº“è¿ç§»
flask db init
flask db migrate -m "Add new table"
flask db upgrade
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥é—®é¢˜
**é—®é¢˜**: æ— æ³•è¿æ¥åˆ°æ•°æ®åº“
**è§£å†³**: æ£€æŸ¥æ•°æ®åº“é…ç½®å’Œè¿æ¥å­—ç¬¦ä¸²

### 2. é™æ€æ–‡ä»¶åŠ è½½é—®é¢˜
**é—®é¢˜**: CSS/JSæ–‡ä»¶æ— æ³•åŠ è½½
**è§£å†³**: æ£€æŸ¥é™æ€æ–‡ä»¶è·¯å¾„é…ç½®

### 3. æƒé™è®¿é—®é—®é¢˜
**é—®é¢˜**: é¡µé¢æç¤ºéœ€è¦ç™»å½•
**è§£å†³**: ç¡®ä¿ç”¨æˆ·å·²æ­£ç¡®ç™»å½•

### 4. é‚®ä»¶å‘é€é—®é¢˜
**é—®é¢˜**: é‚®ä»¶éªŒè¯ç å‘é€å¤±è´¥
**è§£å†³**: æ£€æŸ¥é‚®ä»¶æœåŠ¡å™¨é…ç½®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **é¡¹ç›®åœ°å€**: https://gitee.com/ospuer/kunqing
- **é—®é¢˜åé¦ˆ**: é€šè¿‡Gitee Issuesæäº¤
- **å¼€å‘è€…**: é¾šç²¾å¥ (2713878912@qq.com)

### è´¡çŒ®æŒ‡å—
1. Forké¡¹ç›®åˆ°ä¸ªäººä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç æ›´æ”¹
4. å‘èµ·Pull Request
5. ä»£ç å®¡æŸ¥å’Œåˆå¹¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦æƒ…è¯·å‚é˜…LICENSEæ–‡ä»¶ã€‚

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.0